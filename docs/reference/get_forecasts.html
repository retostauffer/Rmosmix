<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Extract DWD MOSMIX Forecast Data — get_forecasts • mosmix</title>

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script>

<!-- sticky kit -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>



<meta property="og:title" content="Extract DWD MOSMIX Forecast Data — get_forecasts" />

<meta property="og:description" content="This is the reason this package exists. Extracts the DWD MOSMIX
forecasts for a specific station/location." />
<meta name="twitter:card" content="summary" />



<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">mosmix</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../articles/gettingstarted.html">Getting started</a>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
<li>
  <a href="../contact.html">Contact</a>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Extract DWD MOSMIX Forecast Data</h1>
    
    <div class="hidden name"><code>get_forecasts.Rd</code></div>
    </div>

    <div class="ref-description">
    
    <p>This is the reason this package exists. Extracts the DWD MOSMIX
forecasts for a specific station/location.</p>
    
    </div>

    <pre class="usage"><span class='fu'>get_forecasts</span>(<span class='no'>station</span>, <span class='no'>doc</span>, <span class='no'>datetime</span>, <span class='no'>meta</span>, <span class='kw'>parameter</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>as.zoo</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)

<span class='co'># S3 method for dwdforecast</span>
<span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/print'>print</a></span>(<span class='no'>x</span>, <span class='no'>...</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>station</th>
      <td><p><code>character</code> or <code>factor</code> containing the
name of the station (e.g., <code>"11120"</code>, <code>"06660"</code>).
The name has to match the name as provided by the XML file
(see <code><a href='get_station_information.html'>get_station_information</a></code>).</p></td>
    </tr>
    <tr>
      <th>doc</th>
      <td><p>an <code>XMLInternalDocument</code> object as returned by
<code>xmlParse</code> (XML package).</p></td>
    </tr>
    <tr>
      <th>datetime</th>
      <td><p>vector of time stamps for which the forecasts
are valid as returned by <code><a href='get_datetime.html'>get_datetime</a></code>.</p></td>
    </tr>
    <tr>
      <th>meta</th>
      <td><p>object of class <code>dwdmeta</code> as returned by
<code><a href='get_meta_info.html'>get_meta_info</a></code>.</p></td>
    </tr>
    <tr>
      <th>parameter</th>
      <td><p>can be <code>NULL</code>, <code>character</code>, or a
vector of <code>character</code>. If not set (<code>parameter = NULL</code>)
all forecast parameters will be returned containing data.
If set, only a subset will be returned (see 'Details' section).</p></td>
    </tr>
    <tr>
      <th>as.zoo</th>
      <td><p>logical, default <code>TRUE</code>. If <code>FALSE</code> a
<code>data.frame</code> instead of a <code>zoo</code> object will be returned.</p></td>
    </tr>
    <tr>
      <th>x</th>
      <td><p>an object of class <code>dwdforecast</code> as returned by
<code>get_forecasts</code>.</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>forwarded to S3 methods. Unused for now.</p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>Returns a <code>data.frame</code> or <code>zoo</code> object
(depending on input <code>as.zoo</code>) with the DWD MOSMIX forecasts.</p>
    
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>Extracts the forecasted values for a given location.
If <code>as.zoo = FALSE</code> a <code>data.frame</code> will be returned
containing the date/time for which the forecasts are valid
in the first column (<code>datetime</code>).</p>
<p>If <code>as.zoo = TRUE</code> a <code>zoo</code> object is returned. In this
case the <code>datetime</code> column (see above) will be removed.</p>
<p>The <code>parameter</code> input argument allows to subset the data.
If <code>parameter = NULL</code> all parameters will be returned
which provide at least one valid value. Columns containing
missing values only will be removed automatically.
<code>parameter</code> can be used to subset the data. Only the user
specified columns will be returned. Note that this could result
in an empty object if no values are available given the
<code>parmaeter</code> specification!</p>
    
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p>get_station_information, get_meta_info, get_datetime, parameter_description.</p></div>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='co'># Latest L-type DWD MOSMIX forecast file for Innsbruck Airport</span>
<span class='no'>url</span> <span class='kw'>&lt;-</span> <span class='st'>"https://opendata.dwd.de/weather/local_forecasts/mos/MOSMIX_L/single_stations/11120/kml/MOSMIX_L_LATEST_11120.kmz"</span>

<span class='co'># Download and extract file</span>
<span class='no'>kmz</span>   <span class='kw'>&lt;-</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/tempfile'>tempfile</a></span>(<span class='st'>"mosmix_demo_"</span>, <span class='kw'>fileext</span> <span class='kw'>=</span> <span class='st'>".kmz"</span>)
<span class='no'>check</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/utils/topics/download.file'>download.file</a></span>(<span class='no'>url</span>, <span class='no'>kmz</span>)
<span class='kw'>if</span> ( <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/class'>inherits</a></span>(<span class='no'>check</span>, <span class='st'>"try-error"</span>) ) <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/stop'>stop</a></span>(<span class='st'>"Problems downloading the file!"</span>)
<span class='no'>kml</span>   <span class='kw'>&lt;-</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/utils/topics/unzip'>unzip</a></span>(<span class='no'>kmz</span>)

<span class='co'># Parsing the unzipped kml file (XML format)</span>
<span class='co'># And extract required datetime and meta information.</span>
<span class='no'>doc</span> <span class='kw'>&lt;-</span> <span class='kw pkg'>XML</span><span class='kw ns'>::</span><span class='fu'><a href='https://www.rdocumentation.org/packages/XML/topics/xmlTreeParse'>xmlParse</a></span>(<span class='no'>kml</span>)
<span class='no'>datetime</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='get_datetime.html'>get_datetime</a></span>(<span class='no'>doc</span>)
<span class='no'>meta</span>     <span class='kw'>&lt;-</span> <span class='fu'><a href='get_meta_info.html'>get_meta_info</a></span>(<span class='no'>doc</span>)
<span class='no'>stations</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='get_station_information.html'>get_station_information</a></span>(<span class='no'>doc</span>)

<span class='co'># Extracting forecasts now</span>
<span class='co'># - parameter = NULL:    extracts all parameters</span>
<span class='co'># - as.zoo = TRUE:       returns a time series object.</span>
<span class='no'>fcst1</span> <span class='kw'>&lt;-</span> <span class='fu'>get_forecasts</span>(<span class='st'>"11120"</span>, <span class='no'>doc</span>, <span class='no'>datetime</span>, <span class='no'>meta</span>)</div><div class='output co'>#&gt; Processing station 11120</div><div class='input'><span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/print'>print</a></span>(<span class='no'>fcst1</span>)</div><div class='output co'>#&gt; DWD MOS Forecast Object
#&gt; 
#&gt; Issuer: Deutscher Wetterdienst
#&gt; ProductID: MOSMIX
#&gt; GeneratingProcess: DWD MOSMIX hourly, Version 1.0
#&gt; IssueTime: 2019-01-09 21:00:00 UTC
#&gt; ReferencedModel(s)
#&gt; - 2019-01-09 12:00:00 UTC, ICON
#&gt; - 2019-01-09 12:00:00 UTC, ECMWF/IFS 
#&gt; 
#&gt; Object is of class zoo:   TRUE 
#&gt; Station identifier:       11120 
#&gt; Station description:      INNSBRUCK FL. 
#&gt; Station location:         11.35,47.27,581.0 (lon/lat/alt)
#&gt; First forecast for:       2019-01-09 22:00:00 
#&gt; Last forecast for:        2019-01-20 04:00:00 
#&gt; Number forecasts (time):  247 
#&gt; Number of parameters:     98 </div><div class='input'><span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/print'>print</a></span>(<span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/class'>class</a></span>(<span class='no'>fcst1</span>))</div><div class='output co'>#&gt; [1] "dwdforecast" "zoo"        </div><div class='input'><span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/print'>print</a></span>(<span class='fu'><a href='https://www.rdocumentation.org/packages/utils/topics/head'>head</a></span>(<span class='no'>fcst1</span>[,<span class='fl'>1</span>:<span class='fl'>5</span>]))</div><div class='output co'>#&gt;                       PPPP E_PPP TX    TTT E_TTT
#&gt; 2019-01-09 22:00:00 101590    20 NA 272.05   0.5
#&gt; 2019-01-09 23:00:00 101610    40 NA 271.85   0.5
#&gt; 2019-01-10 00:00:00 101650    50 NA 271.75   0.6
#&gt; 2019-01-10 01:00:00 101680    60 NA 271.75   0.6
#&gt; 2019-01-10 02:00:00 101700    60 NA 271.65   0.5
#&gt; 2019-01-10 03:00:00 101790    60 NA 271.55   0.8</div><div class='input'>
<span class='co'># Extracting forecasts now</span>
<span class='co'># - parameter = NULL:    extracts all parameters</span>
<span class='co'># - as.zoo = FALSE:      returns a data.frame</span>
<span class='no'>fcst2</span> <span class='kw'>&lt;-</span> <span class='fu'>get_forecasts</span>(<span class='st'>"11120"</span>, <span class='no'>doc</span>, <span class='no'>datetime</span>, <span class='no'>meta</span>, <span class='kw'>as.zoo</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>)</div><div class='output co'>#&gt; Processing station 11120</div><div class='input'><span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/print'>print</a></span>(<span class='no'>fcst2</span>)</div><div class='output co'>#&gt; DWD MOS Forecast Object
#&gt; 
#&gt; Issuer: Deutscher Wetterdienst
#&gt; ProductID: MOSMIX
#&gt; GeneratingProcess: DWD MOSMIX hourly, Version 1.0
#&gt; IssueTime: 2019-01-09 21:00:00 UTC
#&gt; ReferencedModel(s)
#&gt; - 2019-01-09 12:00:00 UTC, ICON
#&gt; - 2019-01-09 12:00:00 UTC, ECMWF/IFS 
#&gt; 
#&gt; Object is of class zoo:   FALSE 
#&gt; Station identifier:       11120 
#&gt; Station description:      INNSBRUCK FL. 
#&gt; Station location:         11.35,47.27,581.0 (lon/lat/alt)
#&gt; First forecast for:       2019-01-09 22:00:00 
#&gt; Last forecast for:        2019-01-20 04:00:00 
#&gt; Number forecasts (time):  247 
#&gt; Number of parameters:     99 </div><div class='input'><span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/print'>print</a></span>(<span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/class'>class</a></span>(<span class='no'>fcst2</span>))</div><div class='output co'>#&gt; [1] "dwdforecast" "data.frame" </div><div class='input'><span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/print'>print</a></span>(<span class='fu'><a href='https://www.rdocumentation.org/packages/utils/topics/head'>head</a></span>(<span class='no'>fcst2</span>[,<span class='fl'>1</span>:<span class='fl'>5</span>]))</div><div class='output co'>#&gt; DWD MOS Forecast Object
#&gt; 
#&gt; NULL
#&gt; NULL
#&gt; 
#&gt; Object is of class zoo:   FALSE 
#&gt; Station identifier:       datetime PPPP E_PPP TX TTT 
#&gt; Station description:      
#&gt; Station location:         (lon/lat/alt)
#&gt; First forecast for:       2019-01-09 22:00:00 
#&gt; Last forecast for:        2019-01-10 03:00:00 
#&gt; Number forecasts (time):  6 
#&gt; Number of parameters:     5 </div><div class='input'>
<span class='co'># Extracting forecasts now</span>
<span class='co'># - parameter is set:    return 2m temperature and 2m dewpoint</span>
<span class='co'>#                        temperature only (see parameter_description method)</span>
<span class='co'># - as.zoo = TRUE:       returns a time series object.</span>
<span class='no'>fcst3</span> <span class='kw'>&lt;-</span> <span class='fu'>get_forecasts</span>(<span class='st'>"11120"</span>, <span class='no'>doc</span>, <span class='no'>datetime</span>, <span class='no'>meta</span>, <span class='kw'>parameter</span> <span class='kw'>=</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/c'>c</a></span>(<span class='st'>"TTT"</span>, <span class='st'>"Td"</span>))</div><div class='output co'>#&gt; Processing station 11120</div><div class='input'><span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/print'>print</a></span>(<span class='no'>fcst3</span>)</div><div class='output co'>#&gt; DWD MOS Forecast Object
#&gt; 
#&gt; Issuer: Deutscher Wetterdienst
#&gt; ProductID: MOSMIX
#&gt; GeneratingProcess: DWD MOSMIX hourly, Version 1.0
#&gt; IssueTime: 2019-01-09 21:00:00 UTC
#&gt; ReferencedModel(s)
#&gt; - 2019-01-09 12:00:00 UTC, ICON
#&gt; - 2019-01-09 12:00:00 UTC, ECMWF/IFS 
#&gt; 
#&gt; Object is of class zoo:   TRUE 
#&gt; Station identifier:       11120 
#&gt; Station description:      INNSBRUCK FL. 
#&gt; Station location:         11.35,47.27,581.0 (lon/lat/alt)
#&gt; First forecast for:       2019-01-09 22:00:00 
#&gt; Last forecast for:        2019-01-20 04:00:00 
#&gt; Number forecasts (time):  247 
#&gt; Number of parameters:     2 </div><div class='input'><span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/print'>print</a></span>(<span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/class'>class</a></span>(<span class='no'>fcst3</span>))</div><div class='output co'>#&gt; [1] "dwdforecast" "zoo"        </div><div class='input'><span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/print'>print</a></span>(<span class='fu'><a href='https://www.rdocumentation.org/packages/utils/topics/head'>head</a></span>(<span class='no'>fcst3</span>))</div><div class='output co'>#&gt;                        TTT     Td
#&gt; 2019-01-09 22:00:00 272.05 269.25
#&gt; 2019-01-09 23:00:00 271.85 269.35
#&gt; 2019-01-10 00:00:00 271.75 269.35
#&gt; 2019-01-10 01:00:00 271.75 269.35
#&gt; 2019-01-10 02:00:00 271.65 269.35
#&gt; 2019-01-10 03:00:00 271.55 269.25</div><div class='input'><span class='kw pkg'>zoo</span><span class='kw ns'>::</span><span class='fu'><a href='https://www.rdocumentation.org/packages/zoo/topics/plot.zoo'>plot.zoo</a></span>(<span class='no'>fcst3</span> - <span class='fl'>273.15</span>, <span class='kw'>screen</span> <span class='kw'>=</span> <span class='fl'>1</span>, <span class='kw'>col</span> <span class='kw'>=</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/c'>c</a></span>(<span class='st'>"red"</span>, <span class='st'>"green"</span>),
     <span class='kw'>xlab</span> <span class='kw'>=</span> <span class='st'>"date/time"</span>, <span class='kw'>ylab</span> <span class='kw'>=</span> <span class='st'>"TTT/Td [degrees Celsius]"</span>,
     <span class='kw'>main</span> <span class='kw'>=</span> <span class='st'>"DWD MOSMIX Forecasts for Station Innsbruck Airport (11120)"</span>)</div><div class='img'><img src='get_forecasts-1.png' alt='' width='700' height='433' /></div><div class='input'>
<span class='co'># Remove kmz and kml file</span>
<span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/files'>file.remove</a></span>(<span class='no'>kmz</span>, <span class='no'>kml</span>)</div><div class='output co'>#&gt; [1] TRUE TRUE</div><div class='input'>
</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#value">Value</a></li>

      <li><a href="#details">Details</a></li>

      <li><a href="#see-also">See also</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

    <h2>Author</h2>
    <p>Reto Stauffer</p>
<p>Reto Stauffer</p>
  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by Reto Stauffer.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.9000.</p>
</div>
      </footer>
   </div>

  

  </body>
</html>

